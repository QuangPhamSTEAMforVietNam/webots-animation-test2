name: Record animation

on: [push]

jobs:
  record:
    runs-on: ubuntu-latest
    steps:
      - name: Check out the repo
        uses: actions/checkout@v3

      # ðŸ”§ FIX 1: cho git trong container tin tÆ°á»Ÿng workspace
      - name: Fix git safe directory
        run: |
          git config --global --add safe.directory /github/workspace

      # ðŸ”§ FIX 2: Ä‘á»“ng bá»™ ownership vá»›i Docker (root)
      - name: Make workspace owned by root for Docker
        run: |
          sudo chown -R root:root /github/workspace

      - name: Record and deploy the animation
        uses: cyberbotics/webots-animation-action@master
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
